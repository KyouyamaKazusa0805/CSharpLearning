# C# 新语法系列规划及完成情况

* [x] 泛型
  * [x] 067 C# 2 之泛型（一）：泛型的基本使用
  * [x] 068 C# 2 之泛型（二）：可空值类型
  * [x] 069 C# 2 之泛型（三）：泛型接口及泛型参数继承
  * [x] 070 C# 2 之泛型（四）：泛型参数约束
  * [x] 071 C# 2 之泛型（五）：泛型方法
  * [x] 072 C# 2 之泛型（六）：常见泛型数据类型的使用
* [x] 委托类型扩展
  * [x] 匿名函数
    * [x] 073 C# 2 之匿名函数（一）：委托实例化的简化
    * [x] 074 C# 2 之匿名函数（二）：闭包与变量捕获
    * [x] 075 C# 2 之匿名函数（三）：递归匿名函数
  * [x] 076 C# 2 之方法组转委托
  * [x] 077 C# 2 之委托逆变参数和协变返回
* [x] 命名空间优化
  * [x] 078 C# 2 之类型和命名空间别名
  * [x] 079 C# 2 之外部别名（`global` 关键字、`extern alias` 指令）
* [x] 类型关键字
  * [x] 080 C# 2 之分部类型
  * [x] 081 C# 2 之静态类
* [ ] 语句扩展
  * [x] C# 2 之迭代器语句
    * [x] 082 C# 2 之迭代器语句（一）：`yield` 语句
    * [x] 083 C# 2 之迭代器语句（二）：`yield` 的底层
  * [x] 084 C# 2 之 `bool` 类型实例的 `switch` 语句用法
  * [x] 085 C# 2 之访问器上的访问修饰符
  * [ ] 086 C# 2 之 `#pragma warning` 警告禁用指令
* [ ] 指针语法扩展
  * [ ] 087 C# 2 之定长缓冲区字段
* [ ] 零碎语法



## C# 3 语法

| 语法名                     | 英文术语                           | 备注                               |
| -------------------------- | ---------------------------------- | ---------------------------------- |
| 隐式变量类型声明           | Implicitly-typed Local Variables   |                                    |
| 隐式数组变量类型的初始化器 | Implicitly-typed Array Initializer | `new int[] { 1 }` -> `new[] { 1 }` |
| 对象和集合初始化器         | Object & Collection Initializers   |                                    |
| 自动属性                   | Auto-implemented Properties        |                                    |
| 匿名类型                   | Anonymous Types                    | `new { 属性 = 数值 }`              |
| 扩展方法                   | Extension Methods                  |                                    |
| 查询表达式                 | Query Expressions                  | 就是 LINQ（语言集成查询）          |
| Lambda 表达式              | Lambda Expressions                 |                                    |
| 表达式树                   | Expression Trees                   |                                    |
| 分部方法                   | Partial Methods                    |                                    |

## C# 4 语法

| 语法名                 | 英文术语                                                  | 备注                              |
| ---------------------- | --------------------------------------------------------- | --------------------------------- |
| 动态绑定               | Dynamic Bindings                                          | `dynamic` 关键字和 `Dynamic` 类型 |
| 命名和可选参数         | Named & Optional Arguments                                |                                   |
| 泛型参数的协变和逆变性 | Co- & Contra- variance for Generic Delegates & Interfaces |                                   |

## C# 5 语法

| 语法名                           | 英文术语                                                   | 备注       |
| -------------------------------- | ---------------------------------------------------------- | ---------- |
| 异步方法                         | Asynchronous Methods                                       |            |
| 调用方信息特性                   | Caller Information Attributes                              |            |
| `foreach` 循环迭代变量的行为修改 | `foreach` loop was changed to generate a new loop variable | 破坏性修改 |

## C# 6 语法

| 语法名                                          | 英文术语                                         | 备注                |
| ----------------------------------------------- | ------------------------------------------------ | ------------------- |
| 静态引入类型                                    | Import of Static Type Members into Namespace     |                     |
| 异常筛选                                        | Exception Filters                                | `catch when` 从句   |
| 允许 `catch` 和 `finally` 块里使用 `await` 语句 | Await in `catch`/`finally` Blocks                |                     |
| 自动属性的初始化器                              | Auto Property Initializers                       |                     |
| 自动只读属性的初始化器                          | Default Values for Getter-only Properties        |                     |
| 表达式化的方法和只读属性声明                    | Expression-bodied Read-only Properties & Methods |                     |
| `null` 条件和 `null` 传播运算符                 | Null Propagator & Null-conditional Operator      | `??`、`?.` 和 `?[]` |
| 内插字符串                                      | String Interpolation                             |                     |
| `nameof` 表达式                                 | `nameof` Operator                                |                     |
| 字典初始化器                                    | Dictionary Initializer                           |                     |

## C# 7 语法

C# 7 版本的语法发布情况比较特殊，分为 C# 7.0、C# 7.1、C# 7.2 和 C# 7.3 四个小版本。一般我们不区分大版本和小版本，但因为 C# 7.0 情况的特殊性，我把特性全部按照小版本分组列出来。

| 版本 | 语法名                                     | 英文术语                                       | 备注   |
| ---- | ------------------------------------------ | ---------------------------------------------- | ------ |
| 7.0  | `out` 变量内联声明                         | `out` Variables                                |        |
|      | 模式匹配                                   | Pattern Matching                               |        |
|      | 值元组                                     | Value Tuples                                   |        |
|      | 解构                                       | Deconstruction                                 |        |
|      | 弃元                                       | Discards                                       |        |
|      | 本地函数                                   | Local Functions                                |        |
|      | 二进制字面量                               | Binary Literals                                |        |
|      | 数字分隔符                                 | Digit Separators                               |        |
|      | `ref` 返回值和临时变量                     | `ref` Returns & Locals                         |        |
|      | 广义化的异步返回类型                       | Generalized `async` Return Types               |        |
|      | 其余成员的表达式化声明                     | More Expression-bodied Members                 |        |
|      | `throw` 表达式                             | `throw` Expressions                            |        |
| 7.1  | `async` 主方法                             | `async` Main                                   |        |
|      | `default` 隐式类型表达式                   | `default` Expressions                          |        |
|      | 值元组元素名称推断                         | Inferred Tuple Element Names                   |        |
|      | 泛型可用的模式匹配                         | Pattern-matching with Generics                 | `T is` |
| 7.2  | `ref struct` 类型                          | `Span` and `ref`-like Types                    |        |
|      | `in` 参数和 `readonly` 引用                | `in` Parameters & `readonly` References        |        |
|      | `ref` 条件表达式                           | `ref` Conditional                              |        |
|      | 不必放在尾部的命名参数                     | Non-trailing Named Arguments                   |        |
|      | `private protected` 访问级别               | `private protected` Accessibility              |        |
|      | 允许字面量前缀后插入数字分隔符             | Digit Separators after Base Specifiers         |        |
| 7.3  | `Enum`、`Delegate` 和 `unmanaged` 泛型约束 | `Enum`, `Delegate` & `unmanaged` Constraints   |        |
|      | `ref` 临时变量的重新赋值                   | `ref` Locals Re-assignment                     |        |
|      | `stackalloc` 初始化器                      | `stackalloc` Initializers                      |        |
|      | 固定缓冲                                   | Indexing Movable `fixed` Buffers               |        |
|      | 自定义 `fixed` 语句固定对象                | Custom `fixed` Statement                       |        |
|      | 可用于初始化器和查询表达式里的表达式变量   | Expression Variables in Initializers & Queries |        |
|      | 值元组比较功能                             | Tuple Comparison                               |        |
|      | 底层字段的特性目标                         | Attributes on Backing Fields                   |        |

## C# 8 语法

| 语法名                         | 英文术语                                            | 备注                           |
| ------------------------------ | --------------------------------------------------- | ------------------------------ |
| 可空引用类型                   | Nullable Reference Types                            |                                |
| 默认接口成员                   | Default Interface Members                           |                                |
| 递归模式                       | Recursive Patterns                                  |                                |
| 异步流                         | `async` Streams                                     | `await foreach`、`await using` |
| `using` 变量声明增强           | Enhanced `using`                                    |                                |
| 索引和范围表达式               | Ranges & Indices                                    |                                |
| `null` 合并赋值                | `null`-coalescing Assignment                        | `??=`                          |
| 静态本地函数                   | `static` Local Functions                            |                                |
| 广义化非托管类型               | Unmanaged Generic `struct`s                         |                                |
| 只读成员                       | `readonly` Members                                  |                                |
| 任何时候的 `stackalloc` 表达式 | `stackalloc` in Nested Contexts                     |                                |
| 可调整的原义内插字符串         | Alternative Interpolated Verbatim Strings           | `$@""`、`@$""` 均可            |
| `[Obsolete]` 用于属性访问器    | Obsolete on Property Accessors                      |                                |
| 无约束泛型参数 `is null` 匹配  | Permit `t is null` on Unconstrainted Type Parameter |                                |

## C# 9 语法

| 语法名                       | 英文术语                                     | 备注                                 |
| ---------------------------- | -------------------------------------------- | ------------------------------------ |
| 记录类型                     | `record`s                                    |                                      |
| `with` 表达式                | `with` Expressions                           |                                      |
| 只初始化赋值器               | `init`-only Setters                          |                                      |
| 隐式主方法                   | Top-level Statements                         |                                      |
| 关系模式                     | Relational Patterns                          |                                      |
| 模式连词和括号模式           | Pattern Combinators & Parenthesized Patterns | `and`、`or` 和 `not`                 |
| 用于 `switch` 语句的类型模式 | Type Patterns on `switch` Statements         | `case T _` 改成 `case T`             |
| 底层变长整数类型             | Native-sized Integers                        | `nint` 和 `nuint`                    |
| 函数指针                     | Function Pointers                            |                                      |
| 禁止发出 `.localsinit` 指令  | Suppress Emitting `.localsinit` Flag         | `[SkipLocalsInit]` 特性的使用        |
| 隐式 `new` 表达式            | Target-typed `new` Expressions               |                                      |
| 静态匿名函数和 Lambda        | `static` Anonymous Functions & Lambdas       |                                      |
| 基于目标类型的条件表达式     | Target-typed Conditional Expressions         | 该特性包含对内置类型转换的破坏性修改 |
| 协变返回                     | Covariant Return Types                       |                                      |
| Lambda 参数弃元              | Lambda Discard Parameters                    |                                      |
| 适用于本地函数的特性         | Attributes on Local Functions                |                                      |
| 模块初始化器                 | Module Initializers                          | `[ModuleInitializer]` 特性的使用     |
| 扩展 `foreach` 循环          | Extension `GetEnumerator`                    |                                      |
| 分部方法增强                 | `partial` Methods with Returned Values       |                                      |
| 源代码生成器                 | Source Generators                            |                                      |
| 无约束的泛型参数可空性       | Unconstrainted Type Argument                 | `T?` 和 `default` 泛型约束           |

## C# 10 语法

| 语法名                                | 英文术语                            | 备注                                 |
| ------------------------------------- | ----------------------------------- | ------------------------------------ |
| 记录结构类型                          | `record struct`s                    |                                      |
| 基于任何结构的 `with` 表达式          | `with` Expressions on `struct`s     |                                      |
| 增强可空性表达式分析                  | Improved Definite Assignment        |                                      |
| 常量内插字符串                        | Constant Interpolated Strings       |                                      |
| 拓展属性模式                          | Extended Property Patterns          |                                      |
| `sealed record ToString`              | `sealed record ToString`            |                                      |
| 增量源代码生成器                      | Incremental Source Generators       | 增强源代码生成器，以用于高性能场景下 |
| 混合解构                              | Mixed Deconstructions               | 允许解构和变量定义混合在一起         |
| 用于方法级别的 `[AsyncMethodBuilder]` | Method-level `[AsyncMethodBuilder]` |                                      |
| `#line` 指令对列对齐的支持            | `#line` Span Directive              |                                      |
| Lambda 增强                           | Lambda Improvements                 |                                      |
| 自定义内插字符串处理器                | Interpolated String Handlers        |                                      |
| 基于文件范围的命名空间声明            | File-Scoped Namespaces              |                                      |
| 自定义结构的无参构造器                | Parameterless `struct` Constructors |                                      |
| 调用方参数表达式特性                  | `[CallerArgumentExpression]`        |                                      |